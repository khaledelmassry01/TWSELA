<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">`n    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">`n    <meta http-equiv="Pragma" content="no-cache">`n    <meta http-equiv="Expires" content="0">
    <title>إدارة المناطق - Twsela</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="/src/css/styles.css" rel="stylesheet">
    <link href="/src/css/main.css" rel="stylesheet">
    <link href="/src/css/twsela-design.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <a href="#" class="sidebar-logo">
                    <i class="fas fa-paper-plane"></i>
                    <span>Twsela</span>
                </a>
            </div>
            <div class="sidebar-nav">
                <a href="/owner/dashboard" class="nav-link">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>لوحة التحكم</span>
                </a>
                <a href="/owner/shipments" class="nav-link">
                    <i class="fas fa-shipping-fast"></i>
                    <span>الشحنات</span>
                </a>
                <a href="/owner/employees" class="nav-link">
                    <i class="fas fa-users"></i>
                    <span>الموظفين</span>
                </a>
                <a href="/owner/merchants.html" class="nav-link">
                    <i class="fas fa-store"></i>
                    <span>التجار</span>
                </a>
                <a href="/owner/zones" class="nav-link active">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>المناطق</span>
                </a>
                <a href="/owner/pricing" class="nav-link">
                    <i class="fas fa-tags"></i>
                    <span>الأسعار</span>
                </a>
                <a href="/owner/reports" class="nav-link">
                    <i class="fas fa-chart-bar"></i>
                    <span>التقارير</span>
                </a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <h1 class="header-title">إدارة المناطق</h1>
                </div>
                <div class="header-actions">
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="البحث في المناطق...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addZoneModal">
                        <i class="fas fa-plus"></i>
                        إضافة منطقة جديدة
                    </button>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card blue" data-card="0">
                        <div class="stat-label">إجمالي الشحنات</div>
                        <div class="stat-value">12</div>
                        <div class="stat-icon blue">
                            <i class="fas fa-calendar"></i>
                        </div>
                        <div class="mini-chart">
                            <canvas id="totalShipmentsChart" width="60" height="30"></canvas>
                        </div>
                    </div>

                    <div class="stat-card orange" data-card="1">
                        <div class="stat-label">في الطريق</div>
                        <div class="stat-value">8</div>
                        <div class="stat-icon orange">
                            <i class="fas fa-truck"></i>
                        </div>
                        <div class="mini-chart">
                            <canvas id="onthewayChart" width="60" height="30"></canvas>
                        </div>
                    </div>

                    <div class="stat-card green" data-card="2">
                        <div class="stat-label">تم التسليم</div>
                        <div class="stat-value">6</div>
                        <div class="stat-icon green">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-outline-primary btn-sm">عرض التفاصيل</button>
                            <button class="btn btn-primary btn-sm">تحديث الحالة</button>
                        </div>
                    </div>
                </div>

                <!-- Map Visualization -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">خريطة المناطق</h5>
                        <div class="card-actions">
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-search"></i>
                                بحث
                            </button>
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-filter"></i>
                                فلتر
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="map-container">
                            <div class="map-placeholder">
                                <i class="fas fa-map"></i>
                                <p>خريطة المناطق التفاعلية</p>
                                <div class="map-legend">
                                    <div class="legend-item">
                                        <div class="legend-color blue"></div>
                                        <span>نشط</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color orange"></div>
                                        <span>معلق</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Zones Management Table -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">إدارة المناطق</h5>
                        <div class="card-actions">
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table data-table" id="zonesTable">
                                <thead>
                                    <tr>
                                        <th>اسم المنطقة</th>
                                        <th>الحالة</th>
                                        <th>رسوم التسليم (جنيه)</th>
                                        <th>السائقين</th>
                                        <th>الإجراءات</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="zone-icon me-2">
                                                    <i class="fas fa-map-marker-alt"></i>
                                                </div>
                                                <div>
                                                    <div class="fw-bold">1 المنطقة الوسطى</div>
                                                    <small class="text-muted">Central Zone</small>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-text active">
                                                <span class="status-dot active"></span>
                                                نشط
                                            </span>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <span class="status-text active">
                                                    <span class="status-dot active"></span>
                                                    تم التحديث
                                                </span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="badge bg-secondary">L</span>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-btn edit" data-id="1" title="تعديل">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="action-btn delete" data-id="1" title="حذف">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="zone-icon me-2">
                                                    <i class="fas fa-map-marker-alt"></i>
                                                </div>
                                                <div>
                                                    <div class="fw-bold">2 المنطقة الشمالية</div>
                                                    <small class="text-muted">North District</small>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-text active">
                                                <span class="status-dot active"></span>
                                                تم التحديث
                                            </span>
                                        </td>
                                        <td>
                                            <span class="badge bg-secondary">L</span>
                                        </td>
                                        <td>
                                            <span class="badge bg-primary">$5</span>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-btn edit" data-id="2" title="تعديل">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="action-btn delete" data-id="2" title="حذف">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="zone-icon me-2">
                                                    <i class="fas fa-map-marker-alt"></i>
                                                </div>
                                                <div>
                                                    <div class="fw-bold">4 الضواحي الجنوبية</div>
                                                    <small class="text-muted">South Suburbs</small>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-text pending">
                                                <span class="status-dot pending"></span>
                                                معلق
                                            </span>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <span class="status-text active">
                                                    <span class="status-dot active"></span>
                                                    تم التحديث
                                                </span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-dot pending"></span>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-btn edit" data-id="3" title="تعديل">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="action-btn delete" data-id="3" title="حذف">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        <div class="d-flex justify-content-between align-items-center mt-3">
                            <div class="pagination-info">
                                <span class="text-muted">عرض 1-3 من 3 نتائج</span>
                            </div>
                            <div class="pagination">
                                <button class="page-btn" disabled>
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                                <button class="page-btn active">1</button>
                                <button class="page-btn">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Zone Modal -->
    <div class="modal fade" id="addZoneModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">إضافة منطقة جديدة</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addZoneForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="zoneName" class="form-label">اسم المنطقة</label>
                                    <input type="text" class="form-control" id="zoneName" name="zoneName" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="zoneCode" class="form-label">رمز المنطقة</label>
                                    <input type="text" class="form-control" id="zoneCode" name="zoneCode" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="deliveryFee" class="form-label">رسوم التسليم (جنيه)</label>
                                    <input type="number" class="form-control" id="deliveryFee" name="deliveryFee" step="0.01" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="defaultFee" class="form-label">الرسوم الافتراضية للمنطقة (جنيه)</label>
                                    <input type="number" class="form-control" id="defaultFee" name="defaultFee" step="0.01" value="50.00" required>
                                    <small class="form-text text-muted">الرسوم المستخدمة كأولوية ثانية في التسعير</small>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="status" class="form-label">الحالة</label>
                                    <select class="form-control" id="status" name="status" required>
                                        <option value="ACTIVE">نشط</option>
                                        <option value="INACTIVE">غير نشط</option>
                                        <option value="PENDING">معلق</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="latitude" class="form-label">خط العرض</label>
                                    <input type="number" class="form-control" id="latitude" name="latitude" step="any">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="longitude" class="form-label">خط الطول</label>
                                    <input type="number" class="form-control" id="longitude" name="longitude" step="any">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-primary" id="addZoneBtn">إضافة منطقة</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Zone Modal -->
    <div class="modal fade" id="editZoneModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">تعديل المنطقة</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editZoneForm">
                        <input type="hidden" id="editZoneId" name="zoneId">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="editZoneName" class="form-label">اسم المنطقة</label>
                                    <input type="text" class="form-control" id="editZoneName" name="zoneName" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="editZoneCode" class="form-label">رمز المنطقة</label>
                                    <input type="text" class="form-control" id="editZoneCode" name="zoneCode" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="editDeliveryFee" class="form-label">رسوم التسليم (جنيه)</label>
                                    <input type="number" class="form-control" id="editDeliveryFee" name="deliveryFee" step="0.01" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="editStatus" class="form-label">الحالة</label>
                                    <select class="form-control" id="editStatus" name="status" required>
                                        <option value="ACTIVE">نشط</option>
                                        <option value="INACTIVE">غير نشط</option>
                                        <option value="PENDING">معلق</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="form-group mb-3">
                                    <label for="editDescription" class="form-label">الوصف</label>
                                    <textarea class="form-control" id="editDescription" name="description" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="editLatitude" class="form-label">خط العرض</label>
                                    <input type="number" class="form-control" id="editLatitude" name="latitude" step="any">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="editLongitude" class="form-label">خط الطول</label>
                                    <input type="number" class="form-control" id="editLongitude" name="longitude" step="any">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-primary" id="updateZoneBtn">حفظ التغييرات</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Load shared utilities first -->
    <script src="/src/js/shared/SharedDataUtils.js?v=20250112-13"></script>
    <script src="/src/js/shared/GlobalUIHandler.js?v=20250112-13"></script>
    <script src="/src/js/shared/NotificationService.js?v=20250112-13"></script>
    
    <!-- Load services -->
    <script src="/src/js/services/auth_service.js?v=20250112-13"></script>
    <script src="/src/js/services/api_service.js?v=20250112-13"></script>
    
    <!-- Load app.js first to initialize authentication system -->
    <script src="/src/js/app.js?v=20250112-13"></script>
    
    <!-- Load page handler after app.js is ready -->
    <script>
        // Wait for app.js to be ready before loading page handler
        document.addEventListener('DOMContentLoaded', function() {
            // Small delay to ensure app.js is initialized
            setTimeout(() => {
                const script = document.createElement('script');
                script.src = '/src/js/pages/owner-zones-page.js?v=20250112-14';
                script.onload = function() {
                    console.log('✅ Owner zones page script loaded');
                };
                script.onerror = function() {
                    console.error('❌ Failed to load owner zones page script');
                };
                document.head.appendChild(script);
            }, 200); // Wait 200ms for app.js to initialize
        });
    </script>

    <style>
        .zone-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #2563eb;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .map-container {
            height: 400px;
            background: #f8fafc;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .map-placeholder {
            text-align: center;
            color: #6b7280;
        }

        .map-placeholder i {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .map-legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-color.blue { background: #2563eb; }
        .legend-color.orange { background: #f59e0b; }
    </style>
</body>
</html>

                                                </span>

                                            </div>

                                        </td>

                                        <td>

                                            <span class="status-dot pending"></span>

                                        </td>

                                        <td>

                                            <div class="action-buttons">

                                                <button class="action-btn edit" data-id="3" title="تعديل">

                                                    <i class="fas fa-edit"></i>

                                                </button>

                                                <button class="action-btn delete" data-id="3" title="حذف">

                                                    <i class="fas fa-trash"></i>

                                                </button>

                                            </div>

                                        </td>

                                    </tr>

                                </tbody>

                            </table>

                        </div>



                        <!-- Pagination -->

                        <div class="d-flex justify-content-between align-items-center mt-3">

                            <div class="pagination-info">

                                <span class="text-muted">عرض 1-3 من 3 نتائج</span>

                            </div>

                            <div class="pagination">

                                <button class="page-btn" disabled>

                                    <i class="fas fa-chevron-right"></i>

                                </button>

                                <button class="page-btn active">1</button>

                                <button class="page-btn">

                                    <i class="fas fa-chevron-left"></i>

                                </button>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

        </main>

    </div>



    <!-- Add Zone Modal -->

    <div class="modal fade" id="addZoneModal" tabindex="-1">

        <div class="modal-dialog modal-lg">

            <div class="modal-content">

                <div class="modal-header">

                    <h5 class="modal-title">إضافة منطقة جديدة</h5>

                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>

                </div>

                <div class="modal-body">

                    <form id="addZoneForm">

                        <div class="row">

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="zoneName" class="form-label">اسم المنطقة</label>

                                    <input type="text" class="form-control" id="zoneName" name="zoneName" required>

                                </div>

                            </div>

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="zoneCode" class="form-label">رمز المنطقة</label>

                                    <input type="text" class="form-control" id="zoneCode" name="zoneCode" required>

                                </div>

                            </div>

                        </div>

                        <div class="row">

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="deliveryFee" class="form-label">رسوم التسليم (جنيه)</label>

                                    <input type="number" class="form-control" id="deliveryFee" name="deliveryFee" step="0.01" required>

                                </div>

                            </div>

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="defaultFee" class="form-label">الرسوم الافتراضية للمنطقة (جنيه)</label>

                                    <input type="number" class="form-control" id="defaultFee" name="defaultFee" step="0.01" value="50.00" required>

                                    <small class="form-text text-muted">الرسوم المستخدمة كأولوية ثانية في التسعير</small>

                                </div>

                            </div>

                        </div>

                        <div class="row">

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="status" class="form-label">الحالة</label>

                                    <select class="form-control" id="status" name="status" required>

                                        <option value="ACTIVE">نشط</option>

                                        <option value="INACTIVE">غير نشط</option>

                                        <option value="PENDING">معلق</option>

                                    </select>

                                </div>

                            </div>

                        </div>

                        <div class="row">

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="latitude" class="form-label">خط العرض</label>

                                    <input type="number" class="form-control" id="latitude" name="latitude" step="any">

                                </div>

                            </div>

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="longitude" class="form-label">خط الطول</label>

                                    <input type="number" class="form-control" id="longitude" name="longitude" step="any">

                                </div>

                            </div>

                        </div>

                    </form>

                </div>

                <div class="modal-footer">

                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>

                    <button type="button" class="btn btn-primary" id="addZoneBtn">إضافة منطقة</button>

                </div>

            </div>

        </div>

    </div>



    <!-- Edit Zone Modal -->

    <div class="modal fade" id="editZoneModal" tabindex="-1">

        <div class="modal-dialog modal-lg">

            <div class="modal-content">

                <div class="modal-header">

                    <h5 class="modal-title">تعديل المنطقة</h5>

                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>

                </div>

                <div class="modal-body">

                    <form id="editZoneForm">

                        <input type="hidden" id="editZoneId" name="zoneId">

                        <div class="row">

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="editZoneName" class="form-label">اسم المنطقة</label>

                                    <input type="text" class="form-control" id="editZoneName" name="zoneName" required>

                                </div>

                            </div>

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="editZoneCode" class="form-label">رمز المنطقة</label>

                                    <input type="text" class="form-control" id="editZoneCode" name="zoneCode" required>

                                </div>

                            </div>

                        </div>

                        <div class="row">

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="editDeliveryFee" class="form-label">رسوم التسليم (جنيه)</label>

                                    <input type="number" class="form-control" id="editDeliveryFee" name="deliveryFee" step="0.01" required>

                                </div>

                            </div>

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="editStatus" class="form-label">الحالة</label>

                                    <select class="form-control" id="editStatus" name="status" required>

                                        <option value="ACTIVE">نشط</option>

                                        <option value="INACTIVE">غير نشط</option>

                                        <option value="PENDING">معلق</option>

                                    </select>

                                </div>

                            </div>

                        </div>

                        <div class="row">

                            <div class="col-12">

                                <div class="form-group mb-3">

                                    <label for="editDescription" class="form-label">الوصف</label>

                                    <textarea class="form-control" id="editDescription" name="description" rows="3"></textarea>

                                </div>

                            </div>

                        </div>

                        <div class="row">

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="editLatitude" class="form-label">خط العرض</label>

                                    <input type="number" class="form-control" id="editLatitude" name="latitude" step="any">

                                </div>

                            </div>

                            <div class="col-md-6">

                                <div class="form-group mb-3">

                                    <label for="editLongitude" class="form-label">خط الطول</label>

                                    <input type="number" class="form-control" id="editLongitude" name="longitude" step="any">

                                </div>

                            </div>

                        </div>

                    </form>

                </div>

                <div class="modal-footer">

                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>

                    <button type="button" class="btn btn-primary" id="updateZoneBtn">حفظ التغييرات</button>

                </div>

            </div>

        </div>

    </div>



    <!-- Scripts -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    
    <!-- Load shared utilities first -->
    <script src="/src/js/shared/SharedDataUtils.js?v=20250112-13"></script>
    <script src="/src/js/shared/GlobalUIHandler.js?v=20250112-13"></script>
    <script src="/src/js/shared/NotificationService.js?v=20250112-13"></script>
    
    <!-- Load services -->
    <script src="/src/js/services/auth_service.js?v=20250112-13"></script>
    <script src="/src/js/services/api_service.js?v=20250112-13"></script>
    
    <!-- Load app and page handlers -->
    <script src="/src/js/app.js?v=20250112-13"></script>
    <script src="/src/js/pages/owner-zones-page.js?v=20250112-14"></script>


    <style>

        .zone-icon {

            width: 40px;

            height: 40px;

            border-radius: 50%;

            background: #2563eb;

            color: white;

            display: flex;

            align-items: center;

            justify-content: center;

            font-size: 1.2rem;

        }



        .action-buttons {

            display: flex;

            gap: 5px;

        }



        .map-container {

            height: 400px;

            background: #f8fafc;

            border-radius: 10px;

            display: flex;

            align-items: center;

            justify-content: center;

            position: relative;

        }



        .map-placeholder {

            text-align: center;

            color: #6b7280;

        }



        .map-placeholder i {

            font-size: 3rem;

            margin-bottom: 1rem;

        }



        .map-legend {

            position: absolute;

            bottom: 20px;

            right: 20px;

            display: flex;

            gap: 15px;

        }



        .legend-item {

            display: flex;

            align-items: center;

            gap: 5px;

        }



        .legend-color {

            width: 12px;

            height: 12px;

            border-radius: 50%;

        }



        .legend-color.blue { background: #2563eb; }

        .legend-color.orange { background: #f59e0b; }

    </style>

</body>

</html>


